<% layout('layouts/boilerplate') %>

    <h1>Edit Position</h1>
    <form action="/positions/<%= position._id %>?_method=PUT" method="POST" novalidate class="validated-form">

        <div class="form-group mb-3">
            <label class="form-label" for="name">Name</label>
            <input class="form-control" type="text" id="name" name="position[name]" value="<%= position.name %> "
                required>
        </div>
        <div class="form-group mb-3">
            <label class="form-label" for="otherNames">Other Names</label>
            <input class="form-control" type="text" id="otherNames" name="position[otherNames]"
                value="<%= position.otherNames %> " required>
        </div>
        <div class="form-group mb-3">
            <label class="form-label" for="image">Image</label>
            <input class="form-control" type="text" id="image" name="position[image]" value="<%= position.image %>"
                required>
        </div>
        <div class=" mb-3">
            <button class="btn btn-success">Update Position</button>
        </div>
    </form>

    <form action="/subimpls" class="form-inline" method="POST" id="subForm" novalidate>
        <div class="form-group mb-3">
            <label class="form-label" for="subs">Submissions</label>
            <select class="form-control" id="subs"  required>
                <% for (let sub of submissions) {%>
                    <option>
                        <%= sub.name %>
                    </option>
                    <% } %>
            </select>
        </div>
        <div class="form-group mb-3">
            <label class="form-label" for="variation" required>Variation</label>
            <select class="form-control" id="variation" ></select>
        </div>
    
        <div class="form-group mb-3">
            <label class="form-label" for="video">Video</label>
            <input class="form-control" type="text" id="video" name="subImpl[video]" required>
        </div>
        <input type="hidden" name="subImpl[position]"  value="<%= position.id%>">
        <input type="hidden" id="subVarId" name="subImpl[subVar]" value="">
        <div class=" mb-3">
            <button class="btn btn-success">Add Submission</button>
        </div>
    </form>
    <a href="/positions/<%= position._id %> ">Back To Position</a>

    <script>
        const subs = <%- JSON.stringify(submissions) %>
    </script>
    <script src="/forms.js"></script>